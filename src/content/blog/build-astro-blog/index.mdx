---
title: 'Astroä¸ªäººåšå®¢æ­å»º'
description: 'è®°å½•ç”¨Astroæ­å»ºä¸ªäººåšå®¢çš„ç»å†'
publishDate: '2025-02-20'
updatedDate: '2025-02-23'
heroImage: { src: './thumbnail.jpg', color: '#64574D' }
tags: ['tutorial']
language: 'ä¸­æ–‡'
draft: false
comment: true
---

import { Steps, Aside, Tabs, TabItem } from 'astro-pure/user'

# Astroä¸ªäººåšå®¢æ­å»º

## Installation

Environment requirements:

- [Nodejs](https://nodejs.org/): 18.0.0+

### Install Using Fork
You only need to [click fork button at theme repository](https://github.com/cworld1/astro-theme-pure/fork) to create your project; then clone the forked repository to your local machine.

```shell
git clone https://github.com/<your-username>/astro-theme-pure.git
cd ./<your-project>
bun install
```

Then, you can start the Astro dev server and see a live preview of your project while you make it your own!

## Start the Dev Server

Go to your project directory:

```shell
cd ./<your-project>
bun dev
```

## Simple Setup


<Steps>

1. Remove docs files

   - Remove the `src/pages/docs` directory
   - Remove the menu declaration in `src/site.config.ts`:

   ```ts title="src/site.config.ts"
   export const theme: ThemeUserConfig = {
      // ...
      /** Configure the header of your site. */
      header: {
         menu: [
            { title: 'Blog', link: '/blog' },
            { title: 'Docs', link: '/docs' }, // [!code --]
            // ...
         ],
      },
   }
   ```

   - Remove the Content Collection for docs in `src/content.config.ts`:

   ```ts title="src/content.config.ts"
   const docs = defineCollection({ // [!code --]
   loader: glob({ base: './src/content/docs', pattern: '**/*.{md,mdx}' }), // [!code --]
   schema: ({ image }) => // [!code --]
      z.object({ // [!code --]
         ... // [!code --]
      }) // [!code --]
   }) // [!code --]
   export const collections = { blog, docs } // [!code --]
   export const content = { blog } // [!code ++]
   ```

2. Remove `packages` directory (this will be imported by our NPM package)

3. Change the site favicon.

   <Aside type='tip'>
   [Favicon.io](https://favicon.io/) is a great tool that can help you generate favicons quickly.
   </Aside>


   Replace the `public/favicon/*` files with your own favicon.

4. Replace your avatar image.

   Replace the `src/assets/avatar.png` file with your own avatar image.

5. Configure the site

   You can configure your project inside the `src/site.config.ts` configuration file:

   ```ts title="src/site.config.ts"
   export const theme: ThemeUserConfig = {
      author: 'CWorld',
      title: 'Astro Theme Pure',
      site: 'https://astro-pure.js.org',
      description: 'Stay hungry, stay foolish',
      // ...
   }
   
   export const integ: IntegrationUserConfig = { /* ... */ }
   // ...
   ```

6. Typescript Syntax

   The configuration file `site.config.ts` uses Typescript syntax. If you are not familiar with TS syntax, please read about it [here](https://learnxinyminutes.com/docs/typescript/) first.

</Steps>

## Deployment Mode

<Aside type='tip'>
Astro had a very fantastic support for deployment. Check [Deploy your Astro Site](https://docs.astro.build/en/guides/deploy/) for more.
</Aside>


### Vercel

This theme supports Vercel by default:

<Steps>

1. Push your code to your online Git repository (GitHub, GitLab, BitBucket).
2. [Import your project](https://vercel.com/new) into Vercel.
3. Vercel will automatically detect Astro and configure the right settings.
4. Your application is deployed! (e.g. [astro.vercel.app](https://astro.vercel.app/))

</Steps>

And vercel also support static method:

```ts title="astro.config.mjs"
import vercelServerless from '@astrojs/vercel/serverless' // [!code --]
import vercelStatic from '@astrojs/vercel/static'; // [!code ++]

export default defineConfig({
  //   ...
  adapter: vercelServerless() // [!code --]
  adapter: vercelStatic(), // [!code ++]
})
```

### Using Vercel with a custom domain

Vercel Dashboard -> your-project -> Settings -> Domains

Edit your domain and save, configure your DNS settings automatically.

## Waline Comment System

<Aside>
  This theme has integrated the Waline comment system. You can configure it at the
  `integrationConfig.waline` in file `src/site.config.ts`.
</Aside>


The theme's comment, read statistics, likes, and other functionalities are all provided by [Waline](https://waline.js.org/).

### Deploy

You can refer to [its documentation](https://waline.js.org/guide/get-started/) for configuration, and it is recommended to use the Vercel + Lean combination.

#### LeanCloud è®¾ç½® (æ•°æ®åº“)

1. [ç™»å½•](https://console.leancloud.app/login) æˆ– [æ³¨å†Œ](https://console.leancloud.app/register) `LeanCloud å›½é™…ç‰ˆ` å¹¶è¿›å…¥ [æ§åˆ¶å°](https://console.leancloud.app/apps)

2. ç‚¹å‡»å·¦ä¸Šè§’ [åˆ›å»ºåº”ç”¨](https://console.leancloud.app/apps) å¹¶èµ·ä¸€ä¸ªä½ å–œæ¬¢çš„åå­— (è¯·é€‰æ‹©å…è´¹çš„å¼€å‘ç‰ˆ):

   ![åˆ›å»ºåº”ç”¨](./index.assets/leancloud-1-CucZPnJ0.png)åˆ›å»ºåº”ç”¨

3. è¿›å…¥åº”ç”¨ï¼Œé€‰æ‹©å·¦ä¸‹è§’çš„ `è®¾ç½®` > `åº”ç”¨ Key`ã€‚ä½ å¯ä»¥çœ‹åˆ°ä½ çš„ `APP ID`,`APP Key` å’Œ `Master Key`ã€‚è¯·è®°å½•å®ƒä»¬ï¼Œä»¥ä¾¿åç»­ä½¿ç”¨ã€‚

   ![ID å’Œ Key](./index.assets/leancloud-2-C9bCeSu_.png)ID å’Œ Key

#### Vercel éƒ¨ç½² (æœåŠ¡ç«¯)

[![Vercel](./index.assets/button.svg)](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fwalinejs%2Fwaline%2Ftree%2Fmain%2Fexample)Vercel

1. ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ï¼Œè·³è½¬è‡³ Vercel è¿›è¡Œ Server ç«¯éƒ¨ç½²ã€‚

   æ³¨

   å¦‚æœä½ æœªç™»å½•çš„è¯ï¼ŒVercel ä¼šè®©ä½ æ³¨å†Œæˆ–ç™»å½•ï¼Œè¯·ä½¿ç”¨ GitHub è´¦æˆ·è¿›è¡Œå¿«æ·ç™»å½•ã€‚

2. è¾“å…¥ä¸€ä¸ªä½ å–œæ¬¢çš„ Vercel é¡¹ç›®åç§°å¹¶ç‚¹å‡» `Create` ç»§ç»­:

   ![åˆ›å»ºé¡¹ç›®](./index.assets/vercel-1-DoAtoGHg.png)åˆ›å»ºé¡¹ç›®

3. æ­¤æ—¶ Vercel ä¼šåŸºäº Waline æ¨¡æ¿å¸®åŠ©ä½ æ–°å»ºå¹¶åˆå§‹åŒ–ä»“åº“ï¼Œä»“åº“åä¸ºä½ ä¹‹å‰è¾“å…¥çš„é¡¹ç›®åã€‚

   ![deploy](./index.assets/vercel-3-Brb_j0cD.png)deploy

   ä¸€ä¸¤åˆ†é’Ÿåï¼Œæ»¡å±çš„çƒŸèŠ±ä¼šåº†ç¥ä½ éƒ¨ç½²æˆåŠŸã€‚æ­¤æ—¶ç‚¹å‡» `Go to Dashboard` å¯ä»¥è·³è½¬åˆ°åº”ç”¨çš„æ§åˆ¶å°ã€‚

   ![deploy](./index.assets/vercel-4-CNMnhm70.png)deploy

4. ç‚¹å‡»é¡¶éƒ¨çš„ `Settings` - `Environment Variables` è¿›å…¥ç¯å¢ƒå˜é‡é…ç½®é¡µï¼Œå¹¶é…ç½®ä¸‰ä¸ªç¯å¢ƒå˜é‡ `LEAN_ID`, `LEAN_KEY` å’Œ `LEAN_MASTER_KEY` ã€‚å®ƒä»¬çš„å€¼åˆ†åˆ«å¯¹åº”ä¸Šä¸€æ­¥åœ¨ LeanCloud ä¸­è·å¾—çš„ `APP ID`, `APP KEY`, `Master Key`ã€‚

   ![è®¾ç½®ç¯å¢ƒå˜é‡](./index.assets/vercel-5-CIj2EZQq.png)è®¾ç½®ç¯å¢ƒå˜é‡

5. ç¯å¢ƒå˜é‡é…ç½®å®Œæˆä¹‹åç‚¹å‡»é¡¶éƒ¨çš„ `Deployments` ç‚¹å‡»é¡¶éƒ¨æœ€æ–°çš„ä¸€æ¬¡éƒ¨ç½²å³ä¾§çš„ `Redeploy` æŒ‰é’®è¿›è¡Œé‡æ–°éƒ¨ç½²ã€‚è¯¥æ­¥éª¤æ˜¯ä¸ºäº†è®©åˆšæ‰è®¾ç½®çš„ç¯å¢ƒå˜é‡ç”Ÿæ•ˆã€‚

   ![redeploy](./index.assets/vercel-6-CQnJ4Agt.png)redeploy

6. æ­¤æ—¶ä¼šè·³è½¬åˆ° `Overview` ç•Œé¢å¼€å§‹éƒ¨ç½²ï¼Œç­‰å¾…ç‰‡åˆ»å `STATUS` ä¼šå˜æˆ `Ready`ã€‚æ­¤æ—¶è¯·ç‚¹å‡» `Visit` ï¼Œå³å¯è·³è½¬åˆ°éƒ¨ç½²å¥½çš„ç½‘ç«™åœ°å€ï¼Œæ­¤åœ°å€å³ä¸ºä½ çš„æœåŠ¡ç«¯åœ°å€ã€‚

   ![redeploy success](./index.assets/vercel-7-DbSum90d.png)redeploy success

#### ç»‘å®šåŸŸå (å¯é€‰)

1. ç‚¹å‡»é¡¶éƒ¨çš„ `Settings` - `Domains` è¿›å…¥åŸŸåé…ç½®é¡µ

2. è¾“å…¥éœ€è¦ç»‘å®šçš„åŸŸåå¹¶ç‚¹å‡» `Add`

   ![Add domain](./index.assets/vercel-8-BDTeHH3e.png)Add domain

3. åœ¨åŸŸåæœåŠ¡å™¨å•†å¤„æ·»åŠ æ–°çš„ `CNAME` è§£æè®°å½•

   | Type  | Name    | Value                |
   | ----- | ------- | -------------------- |
   | CNAME | example | cname.vercel-dns.com |

4. ç­‰å¾…ç”Ÿæ•ˆï¼Œä½ å¯ä»¥é€šè¿‡è‡ªå·±çš„åŸŸåæ¥è®¿é—®äº†ğŸ‰

   - è¯„è®ºç³»ç»Ÿï¼šexample.yourdomain.com
   - è¯„è®ºç®¡ç†ï¼šexample.yourdomain.com/ui

   ![success](./index.assets/vercel-9-Df5XGWYy.png)success

#### è¯„è®ºç®¡ç† (ç®¡ç†ç«¯)

1. éƒ¨ç½²å®Œæˆåï¼Œè¯·è®¿é—® `<serverURL>/ui/register` è¿›è¡Œæ³¨å†Œã€‚é¦–ä¸ªæ³¨å†Œçš„äººä¼šè¢«è®¾å®šæˆç®¡ç†å‘˜ã€‚
2. ç®¡ç†å‘˜ç™»é™†åï¼Œå³å¯çœ‹åˆ°è¯„è®ºç®¡ç†ç•Œé¢ã€‚åœ¨è¿™é‡Œå¯ä»¥ä¿®æ”¹ã€æ ‡è®°æˆ–åˆ é™¤è¯„è®ºã€‚
3. ç”¨æˆ·ä¹Ÿå¯é€šè¿‡è¯„è®ºæ¡†æ³¨å†Œè´¦å·ï¼Œç™»é™†åä¼šè·³è½¬åˆ°è‡ªå·±çš„æ¡£æ¡ˆé¡µã€‚

### Configuration

Then you can configure the Waline comment system in the `integrationConfig.server`.

```ts title="src/site.config.ts"
export const integ: IntegrationUserConfig = {
  // ...
  waline: {
    enable: true,
    // Server service link
    server: 'https://your-project-name.vercel.app/', // [!code highlight]
    // Refer https://waline.js.org/en/guide/features/emoji.html
    emoji: ['bmoji', 'weibo'],
    // Refer https://waline.js.org/en/reference/client/props.html
    additionalConfigs: {
      pageview: true,
      comment: true
      // ...
    }
  }
}
```

### Usage

You can call it manually in `.astro` or `.mdx` files.

```jsx
import { Comment } from 'astro-pure/advanced'

;<Comment />
```

> å‚è€ƒé“¾æ¥ï¼š
>
> [DOCS â€¢ Astro Theme Pure](https://astro-pure.js.org/docs/)
>
> [cworld1/astro-theme-pure: â­ A simple, fast and powerful blog theme built by Astro](https://github.com/cworld1/astro-theme-pure)
>
> [å¿«é€Ÿä¸Šæ‰‹ | Waline](https://waline.js.org/guide/get-started/)
